:root{
  --panel-top: 0px;        /* 由 JS 寫入：目前抽屜 top */
  --panel-head-h: 52px;    /* .scene-footer 高度（JS 會覆蓋） */
}

/*全頁框架容器*/
.page-wrapper {
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
}

// /* ▲ Bootstrap container 會有左右 padding，會干擾 393×685 百分比定位 */
// .container.bg-scene{ padding-left:0; padding-right:0; }

/* 四邊距形成「209×158」的槽位 */
.cat-slot {
  position: absolute;
  top: 59.3%;
  left: 15%;
  width: 53.2%;
  height: 23.1%;

}

/* 讓內容不被固定底列遮住 */
.has-bottom-pad { padding-bottom: calc(108px + env(safe-area-inset-bottom)); }

/* 背景容器：等比縮放，基準為 393×685 */
.bg-scene {
  width: 100%;
  max-width: 393px;
  aspect-ratio: 393 / 685;
  position: relative;
  
  // margin: 0 auto;
  background-image: url('/assets/images/bg/bg1.png');
  background-repeat:no-repeat;
  // background-position:center -90px;
  background-position:center;
  background-size:cover;
}

.mt-top {
  margin-top: 60px;
}

/* ZZZ 位置： inset（391/262/178/115） */
.speech {
  position: absolute;
  inset: 57.08% 29.26% 38.24% 45.29%; /* top(391/685) right(115/393)  bottom(262/685) left(178/393) */
  padding: 7.5px 6.5px;
}

/* 貓的槽位：把 px 轉百分比，RWD 不跑位 */
.cat-slot {
  position: absolute;
  /* 由 393×685 換算 */
  top: 59.27%;    /* 406 / 685 */
  left: 15.01%;   /* 59 / 393 */
  width: 53.19%;  /* 209 / 393 */
  height: 23.07%; /* 158 / 685 */
}
.cat-slot img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

/* 進度卡樣式 */
.task-card { 
  background-color: rgba($primary-50, 0.33);
  box-shadow: 0 1px 2px rgba(0,0,0,.04); 
}
.progress-thin { 
  height: 6px; --bs-progress-bg: #{$primary-50}; 
}
.progress-thin .progress-bar { 
  --bs-progress-bar-bg:  #{$primary-500}; 
}
.icon-badge { 
  width:24px; 
  height:24px; 
  border-radius:50%; 
  background:$neutral-50; 
  box-shadow:0 2px 8px rgba(0,0,0,.08); }

/* 抽屜容器：固定在視窗底部，開啟時上滑到 top:67px */
.relax-panel{
  position: fixed;
  left: 0; right: 0; bottom: 0;
  top: var(--panel-top);                 /* ▲ 由 JS 控制 */
  z-index: 1;                         
  display: flex; flex-direction: column; align-items: center;
  min-height: 0;            /* 讓子層可正確收縮（避免 Safari 撐開） */
  pointer-events: none;                 /* 先把事件交給內部 */
  transition: top .28s ease;
}
.relax-panel.is-open{} /* ▲ 只作狀態標記，位置由變數控制 */

/* 只調整 .scene-footer：當作抽屜的「頭」 */
.scene-footer{
  pointer-events: auto;
  width: 100%; max-width: 393px;
  background: transparent;
  position: static;   /* 取消你原本的 absolute */
  margin-bottom: 0;  /* 保險：清底部距離，確保「貼齊」 */
}

/* 抽屜內容：填滿剩餘高度並可捲動 */
.relax-panel .scene-body{
  pointer-events: auto;
  width: 100%; max-width: 393px;
  background: var(--panel-bg, var(--bs-body-bg, #fff)); /* 可覆寫底色 */
  border-radius: 0px 12px 0 0;
  
 /* 永遠緊貼在 .scene-footer 下方 */
  flex: 1 1 auto;
  min-height: 0;     /* 關鍵：避免內容把容器撐開 */
  overflow: auto;
}

 /* ▲ 展開時，底部導覽不吃點擊（避免擋抽屜） */
html.panel-open .nav-bottom,
html.panel-open footer { pointer-events:none; }

/* 若第二個 container 仍有 has-bottom-pad（給底部導覽預留），可視需要拿掉 */
.body.has-bottom-pad { padding-bottom: 108px; }

.body {
  height: auto;//暫訂
  background: $primary-50;
  // background:#{$primary-50};
}

.icon_cat_can {
  color: $neutral-500;  /* 因為 fill="currentColor" stroke="currentColor" */
  // color: #{$neutral-500};  /* 因為 fill="currentColor" stroke="currentColor" */
}

/*自訂shadow*/

.shadow-mini {
  box-shadow:0px 0px 4px rgba(0, 0, 0, 0.1) ; //custom
}

/* 自訂小圓角 */
$radius-xs: .25rem;
.rounded-top-m    { 
  border-top-left-radius: 16px !important; 
  border-top-right-radius: 16px !important; }
.rounded-bottom-xs { 
  border-bottom-left-radius: 8px !important; 
  border-bottom-right-radius: 8px !important; }

/* 參數 */
.accordion.accordion-flush {
  --acc-item-h: 143px;
  --acc-peek:   47px;
}

/* 讓 flush 也有邊與圓角、項目間留距 */
.accordion.accordion-flush {
  .accordion-item {
    height: var(--acc-item-h);
    background: $neutral-0;
    border: 1px solid var(--bs-border-color);
    overflow: hidden;              /* 讓圓角吃到內層 */
    position: relative;
  }

   /* 收折時堆疊，只露出 47px（限定「上一張是收折」才套負 margin）*/
  .accordion-item:not(:has(.accordion-collapse.show)) + .accordion-item {
    margin-top: calc(-1 * (var(--acc-item-h) - var(--acc-peek))); /* = -96px */
  }

  /* 標題高度=47px；去掉陰影與箭頭 */
  .accordion-button{
    min-height: var(--acc-peek);
    padding-top: .5rem; padding-bottom: .5rem;
    box-shadow: none;
    background-color: transparent !important;
  }
  
  .accordion-button::after{ display:none !important; }
  .accordion-body{ background-color: transparent !important; }

  /* 讓父層底色透出 */
  .accordion-button,
  .accordion-body { background-color: transparent !important; }
  .accordion-button { min-height: var(--acc-peek); padding-top:.5rem; padding-bottom:.5rem; box-shadow:none; }
}

/* 只有最後一張卡片用漸層 */
/* 改成只在「未展開(.acc-open)」時才套漸層 */
#accordionFlushExample:not(.acc-open) .accordion-item:last-child {
  background-color: #fff;
  --bs-gradient:
    radial-gradient(
      140% 140% at 0% 0%,
      #ffffff 0%,
      #ffffff 50%,
      rgba(223,240,183,.55) 70%,
      rgba(223,240,183,0) 100%
    ),
    radial-gradient(
      110% 110% at 100% 100%,
      rgba(255,246,0,.45) 0%,
      rgba(255,246,0,0) 60%
    );
  background-image: var(--bs-gradient);
  overflow: hidden;
}

/* ★修正：展開狀態樣式，移到頂層，避免寫成後代而失效 */
#accordionFlushExample.acc-open {
  .accordion-item {
    height: auto !important;            /* 展開不固定高 */
    background-image: none !important;  /* 展開取消漸層 */
    background-color: #fff !important;  /* 展開純白 */
  }
  .accordion-item + .accordion-item {
    margin-top: 8px !important;         /* 展開的卡片間距 8px */
  }
}


// 儲存筆記內容
.diary-textarea {
  min-height: 67px;
  resize: vertical;
  line-height: 1.5;
  white-space: pre-wrap;
  word-break: break-word;
}
.saved-list .diary-entry {
  white-space: pre-wrap;
  word-break: break-word;
  font-size: 0.875rem;
  color: var(--bs-primary-700, #1e3050);
  margin-bottom: .5rem;
} 


/*z-index整理 
_footer.scss的bottom-nav(footer區塊)
--> 1030
_footer-breating.scss的bottom-sheet(footer區塊裡的呼吸抽屜功能)
--> 2000
_index.scss的relax-panel(index的我的放鬆旅程抽屜功能、edit-itinerary的編輯行程抽屜功能)
--> 1
_index.scss的breathing-exercises-edit.ejs的bottom-sheet-new(edit-itinerary的編輯行程內的新增/編輯呼吸屜功能)
--> 2

_edit-itinerary的modal及modal-backdrop(edit-itinerary的編輯行程內的自訂+彈出視窗用(myday-diary-template.ejs))
--> 2010

_settingAccount的loginAccount的span
--> 1
_settingNewbieGuide的full-screen-page
--> 1

*/